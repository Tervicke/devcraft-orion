package main

import (
	"fmt"

	"github.com/gin-gonic/gin"
)

type BidRequest struct {
	Bidid string `json:"Bidid"` //optional gonna be generated by the system
	Userid string `json:"Userid" binding:"required"`
	Price float64 `json:"Price" binding:"required"`
}

func main(){
	r := gin.Default();
	r.GET("/ping", func(c *gin.Context) {
		c.JSON(200, "helloworld");
	});
	r.POST("/bid", func(c *gin.Context) {
		//check if the request body is valid
		var req BidRequest;
		if err := c.ShouldBindBodyWithJSON(&req); err != nil {
			c.JSON(400, gin.H{"error body did not match": err.Error()});
			return 
		}
		fmt.Println("Received bid request: ", req);
		c.JSON(200 , "success");
	});
	r.Run(":8080");
}